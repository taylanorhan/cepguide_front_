{"ast":null,"code":"import React,{useState,useContext}from'react';import{useNavigate}from'react-router-dom';import{GlobalContext}from'../../context/GlobalState';import'./CardPayment.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CardPayment=()=>{const[cardNumber,setCardNumber]=useState('');const[expiryDate,setExpiryDate]=useState('');const[cvv,setCvv]=useState('');const[errors,setErrors]=useState({});const navigate=useNavigate();const{cart,addItemToOrderList,clearCart,orders}=useContext(GlobalContext);const handleCardNumberChange=e=>{let value=e.target.value.replace(/\\s+/g,'');// Remove all spaces\nconst regex=/^[0-9\\b]{0,16}$/;if(regex.test(value)){var _value$match;value=((_value$match=value.match(/.{1,4}/g))===null||_value$match===void 0?void 0:_value$match.join(' '))||'';// Add space after every 4 digits\nsetCardNumber(value);setErrors(prevErrors=>({...prevErrors,cardNumber:''}));}else{setErrors(prevErrors=>({...prevErrors,cardNumber:'Card number must be 16 digits'}));}};const handleExpiryDateChange=e=>{let value=e.target.value;if(value.length===2&&!value.includes('/')){value=\"\".concat(value,\"/\");}const regex=/^(0[1-9]|1[0-2])\\/?([0-9]{0,2})$/;if(value.length<=5){setExpiryDate(value);if(regex.test(value)){setErrors(prevErrors=>({...prevErrors,expiryDate:''}));}else{setErrors(prevErrors=>({...prevErrors,expiryDate:'Invalid expiry date'}));}}};const handleCvvChange=e=>{const value=e.target.value;const regex=/^[0-9\\b]{0,3}$/;if(regex.test(value)){setCvv(value);setErrors(prevErrors=>({...prevErrors,cvv:''}));}else{setErrors(prevErrors=>({...prevErrors,cvv:'CVV must be 3 digits'}));}};const isValidExpiryDate=date=>{const[month,year]=date.split('/');if(month&&year){const expiryDate=new Date(\"20\".concat(year),month-1);const currentDate=new Date();return expiryDate>currentDate;}return false;};const handleConfirm=()=>{const cardNumberValid=cardNumber.replace(/\\s/g,'').length===16;const expiryDateValid=/^(0[1-9]|1[0-2])\\/([0-9]{2})$/.test(expiryDate)&&isValidExpiryDate(expiryDate);const cvvValid=cvv.length===3;if(cardNumberValid&&expiryDateValid&&cvvValid){addItemToOrderList({orderId:orders.length+1,buyerId:1,items:[...cart],price:cart.reduce((sum,item)=>sum+item.price,0),address:\"2025 Sk. Caglayan Mahallesi\",deliveryDate:\"05/16/2024\",isDelivered:false});clearCart();navigate('/confirmation');}else{setErrors({cardNumber:!cardNumberValid?'Card number must be 16 digits':'',expiryDate:!expiryDateValid?'Invalid expiry date':'',cvv:!cvvValid?'CVV must be 3 digits':''});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"payment-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Card Payment\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"payment-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"cardNumber\",children:\"Card Number\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"cardNumber\",value:cardNumber,onChange:handleCardNumberChange,required:true}),errors.cardNumber&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:errors.cardNumber})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"expiryDate\",children:\"Expiry Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"expiryDate\",value:expiryDate,onChange:handleExpiryDateChange,placeholder:\"MM/YY\",required:true}),errors.expiryDate&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:errors.expiryDate})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"cvv\",children:\"CVV\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"cvv\",value:cvv,onChange:handleCvvChange,required:true}),errors.cvv&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:errors.cvv})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleConfirm,className:\"confirm-button\",children:\"Confirm Payment\"})]})]});};export default CardPayment;","map":{"version":3,"names":["React","useState","useContext","useNavigate","GlobalContext","jsx","_jsx","jsxs","_jsxs","CardPayment","cardNumber","setCardNumber","expiryDate","setExpiryDate","cvv","setCvv","errors","setErrors","navigate","cart","addItemToOrderList","clearCart","orders","handleCardNumberChange","e","value","target","replace","regex","test","_value$match","match","join","prevErrors","handleExpiryDateChange","length","includes","concat","handleCvvChange","isValidExpiryDate","date","month","year","split","Date","currentDate","handleConfirm","cardNumberValid","expiryDateValid","cvvValid","orderId","buyerId","items","price","reduce","sum","item","address","deliveryDate","isDelivered","className","children","htmlFor","type","id","onChange","required","placeholder","onClick"],"sources":["/Users/orhan/Desktop/CepGuide/src/components/CardPayment/CardPayment.js"],"sourcesContent":["import React, { useState, useContext } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { GlobalContext } from '../../context/GlobalState';\nimport './CardPayment.css';\n\nconst CardPayment = () => {\n  const [cardNumber, setCardNumber] = useState('');\n  const [expiryDate, setExpiryDate] = useState('');\n  const [cvv, setCvv] = useState('');\n  const [errors, setErrors] = useState({});\n  const navigate = useNavigate();\n  const { cart, addItemToOrderList, clearCart, orders } = useContext(GlobalContext);\n\n  const handleCardNumberChange = (e) => {\n    let value = e.target.value.replace(/\\s+/g, ''); // Remove all spaces\n    const regex = /^[0-9\\b]{0,16}$/;\n    if (regex.test(value)) {\n      value = value.match(/.{1,4}/g)?.join(' ') || ''; // Add space after every 4 digits\n      setCardNumber(value);\n      setErrors(prevErrors => ({ ...prevErrors, cardNumber: '' }));\n    } else {\n      setErrors(prevErrors => ({ ...prevErrors, cardNumber: 'Card number must be 16 digits' }));\n    }\n  };\n\n  const handleExpiryDateChange = (e) => {\n    let value = e.target.value;\n    if (value.length === 2 && !value.includes('/')) {\n      value = `${value}/`;\n    }\n    const regex = /^(0[1-9]|1[0-2])\\/?([0-9]{0,2})$/;\n    if (value.length <= 5) {\n      setExpiryDate(value);\n      if (regex.test(value)) {\n        setErrors(prevErrors => ({ ...prevErrors, expiryDate: '' }));\n      } else {\n        setErrors(prevErrors => ({ ...prevErrors, expiryDate: 'Invalid expiry date' }));\n      }\n    }\n  };\n\n  const handleCvvChange = (e) => {\n    const value = e.target.value;\n    const regex = /^[0-9\\b]{0,3}$/;\n    if (regex.test(value)) {\n      setCvv(value);\n      setErrors(prevErrors => ({ ...prevErrors, cvv: '' }));\n    } else {\n      setErrors(prevErrors => ({ ...prevErrors, cvv: 'CVV must be 3 digits' }));\n    }\n  };\n\n  const isValidExpiryDate = (date) => {\n    const [month, year] = date.split('/');\n    if (month && year) {\n      const expiryDate = new Date(`20${year}`, month - 1);\n      const currentDate = new Date();\n      return expiryDate > currentDate;\n    }\n    return false;\n  };\n\n  const handleConfirm = () => {\n    const cardNumberValid = cardNumber.replace(/\\s/g, '').length === 16;\n    const expiryDateValid = /^(0[1-9]|1[0-2])\\/([0-9]{2})$/.test(expiryDate) && isValidExpiryDate(expiryDate);\n    const cvvValid = cvv.length === 3;\n\n    if (cardNumberValid && expiryDateValid && cvvValid) {\n      addItemToOrderList({\n        orderId: orders.length + 1,\n        buyerId: 1,\n        items: [...cart],\n        price: cart.reduce((sum, item) => sum + item.price, 0),\n        address: \"2025 Sk. Caglayan Mahallesi\",\n        deliveryDate: \"05/16/2024\",\n        isDelivered: false,\n      });\n      clearCart();\n      navigate('/confirmation');\n    } else {\n      setErrors({\n        cardNumber: !cardNumberValid ? 'Card number must be 16 digits' : '',\n        expiryDate: !expiryDateValid ? 'Invalid expiry date' : '',\n        cvv: !cvvValid ? 'CVV must be 3 digits' : ''\n      });\n    }\n  };\n\n  return (\n    <div className=\"payment-container\">\n      <h2>Card Payment</h2>\n      <form className=\"payment-form\">\n        <div className=\"form-group\">\n          <label htmlFor=\"cardNumber\">Card Number</label>\n          <input\n            type=\"text\"\n            id=\"cardNumber\"\n            value={cardNumber}\n            onChange={handleCardNumberChange}\n            required\n          />\n          {errors.cardNumber && <p className=\"error\">{errors.cardNumber}</p>}\n        </div>\n        <div className=\"form-group\">\n          <label htmlFor=\"expiryDate\">Expiry Date</label>\n          <input\n            type=\"text\"\n            id=\"expiryDate\"\n            value={expiryDate}\n            onChange={handleExpiryDateChange}\n            placeholder=\"MM/YY\"\n            required\n          />\n          {errors.expiryDate && <p className=\"error\">{errors.expiryDate}</p>}\n        </div>\n        <div className=\"form-group\">\n          <label htmlFor=\"cvv\">CVV</label>\n          <input\n            type=\"text\"\n            id=\"cvv\"\n            value={cvv}\n            onChange={handleCvvChange}\n            required\n          />\n          {errors.cvv && <p className=\"error\">{errors.cvv}</p>}\n        </div>\n        <button type=\"button\" onClick={handleConfirm} className=\"confirm-button\">Confirm Payment</button>\n      </form>\n    </div>\n  );\n};\n\nexport default CardPayment;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}