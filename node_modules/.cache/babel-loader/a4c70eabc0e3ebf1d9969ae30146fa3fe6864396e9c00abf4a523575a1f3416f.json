{"ast":null,"code":"var _jsxFileName = \"/Users/orhan/Desktop/CepGuide/src/components/cart/Cart.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { GlobalContext } from \"../../context/GlobalState\";\nimport \"./Cart.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Cart() {\n  _s();\n  const {\n    cart,\n    user,\n    setCart,\n    clearCart\n  } = useContext(GlobalContext);\n  const navigate = useNavigate();\n  useEffect(() => {\n    const fetchCart = async () => {\n      try {\n        if (user && user._id) {\n          // Check if user and user._id are defined\n          console.log('Fetching cart for user:', user._id);\n          const response = await axios.get('http://localhost:3000/cart', {\n            params: {\n              userId: user._id\n            }\n          });\n          console.log('Cart response:', response.data);\n          setCart(response.data);\n        } else {\n          console.log('User is not defined or user._id is missing');\n        }\n      } catch (error) {\n        console.error('Error fetching cart:', error);\n      }\n    };\n    fetchCart();\n  }, [user, setCart]);\n  const handleCheckout = async () => {\n    console.log('handleCheckout called');\n    console.log('User:', user);\n    console.log('Cart:', cart);\n    try {\n      if (user && cart.length) {\n        console.log('User ID:', user.user._id);\n        console.log('Cart Items:', cart);\n        const response = await axios.post('http://localhost:3000/orders', {\n          userId: user.user._id,\n          items: cart\n        });\n        if (response.status === 201) {\n          console.log('Order Successful:', response.data);\n          // clearCart();\n          navigate('/checkout');\n        } else {\n          console.error('Order failed:', response.statusText);\n        }\n      } else {\n        console.log('User or cart is not defined');\n      }\n    } catch (error) {\n      if (error.response) {\n        console.error('Order Error:', error.response.data);\n      } else if (error.request) {\n        console.error('Order Error: No response from server', error.request);\n      } else {\n        console.error('Order Error:', error.message);\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"cart-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Cart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), !cart.length ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No Excursions Added! Please add something to your cart.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cart-list\",\n        children: cart.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cart-item\",\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: `/item/${item.id}`,\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: item.image,\n              alt: item.name,\n              className: \"cart-image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"item-details\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"item-name-price\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"item-name\",\n                children: item.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 83,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"item-price\",\n                children: [\"\\u20BA\", item.price.toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"Adults: \", item.adults]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 85,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"Children: \", item.children]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 17\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"item-btn\",\n        onClick: handleCheckout,\n        children: \"Next\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/excursions\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"item-btn back-btn\",\n          children: \"Back to Excursions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        style: {\n          backgroundColor: \"red\"\n        },\n        className: \"item-btn\",\n        onClick: () => clearCart(),\n        children: \"Clear\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n}\n_s(Cart, \"3FUi2zvgkBHDBA++3chCjFnNRP0=\", false, function () {\n  return [useNavigate];\n});\n_c = Cart;\nexport default Cart;\nvar _c;\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"names":["React","useContext","useEffect","Link","useNavigate","axios","GlobalContext","jsxDEV","_jsxDEV","Fragment","_Fragment","Cart","_s","cart","user","setCart","clearCart","navigate","fetchCart","_id","console","log","response","get","params","userId","data","error","handleCheckout","length","post","items","status","statusText","request","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","item","index","to","id","src","image","alt","name","price","toFixed","adults","onClick","style","backgroundColor","_c","$RefreshReg$"],"sources":["/Users/orhan/Desktop/CepGuide/src/components/cart/Cart.js"],"sourcesContent":["import React, { useContext, useEffect } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { GlobalContext } from \"../../context/GlobalState\";\nimport \"./Cart.css\";\n\nfunction Cart() {\n  const { cart, user, setCart, clearCart } = useContext(GlobalContext);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const fetchCart = async () => {\n      try {\n        if (user && user._id) { // Check if user and user._id are defined\n          console.log('Fetching cart for user:', user._id);\n          const response = await axios.get('http://localhost:3000/cart', {\n            params: { userId: user._id }\n          });\n          console.log('Cart response:', response.data);\n          setCart(response.data);\n        } else {\n          console.log('User is not defined or user._id is missing');\n        }\n      } catch (error) {\n        console.error('Error fetching cart:', error);\n      }\n    };\n\n    fetchCart();\n  }, [user, setCart]);\n\n  const handleCheckout = async () => {\n    console.log('handleCheckout called');\n    console.log('User:', user); \n    console.log('Cart:', cart); \n     \n    try {\n      if (user && cart.length) {\n        console.log('User ID:', user.user._id);\n        console.log('Cart Items:', cart);\n\n        const response = await axios.post('http://localhost:3000/orders', {\n          userId: user.user._id, \n          items: cart\n        });\n\n        if (response.status === 201) {\n          console.log('Order Successful:', response.data);\n          // clearCart();\n          navigate('/checkout');\n        } else {\n          console.error('Order failed:', response.statusText);\n        }\n      } else {\n        console.log('User or cart is not defined');\n      }\n    } catch (error) {\n      if (error.response) {\n        console.error('Order Error:', error.response.data);\n      } else if (error.request) {\n        console.error('Order Error: No response from server', error.request);\n      } else {\n        console.error('Order Error:', error.message);\n      }\n    }\n  };\n\n  return (\n    <div className=\"cart-container\">\n      <h1>Cart</h1>\n      {!cart.length ? (\n        <p>No Excursions Added! Please add something to your cart.</p>\n      ) : (\n        <>\n          <div className=\"cart-list\">\n            {cart.map((item, index) => (\n              <div className=\"cart-item\" key={index}>\n                <Link to={`/item/${item.id}`}>\n                  <img src={item.image} alt={item.name} className=\"cart-image\" />\n                </Link>\n                <div className=\"item-details\">\n                  <div className=\"item-name-price\">\n                    <div className=\"item-name\">{item.name}</div>\n                    <div className=\"item-price\">â‚º{item.price.toFixed(2)}</div>\n                    <div>Adults: {item.adults}</div>\n                    <div>Children: {item.children}</div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n          <button className=\"item-btn\" onClick={handleCheckout}>Next</button>\n          <Link to=\"/excursions\">\n            <button className=\"item-btn back-btn\">Back to Excursions</button>\n          </Link>\n          <button style={{backgroundColor:\"red\"}} className=\"item-btn\" onClick={() => clearCart()}>Clear</button>\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default Cart;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}